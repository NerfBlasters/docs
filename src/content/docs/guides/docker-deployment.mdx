---
title: Docker Deployment
description: Deploy Orbit using Docker and Docker Compose
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

# Docker Deployment Guide

This guide will help you deploy Orbit using Docker and Docker Compose, covering both development and production environments.

## Prerequisites

Before you begin, ensure you have:
- Docker Engine installed (version 20.10.0 or higher)
- Docker Compose V2 installed
- Git installed (for cloning the repository)

## Quick Start

The fastest way to get Orbit running with Docker:

```bash
# Clone the repository
git clone https://github.com/orbitscanner/orbit
cd orbit

# Start the containers
docker compose up -d

# Access the application
# Frontend: http://localhost:5173
# PocketBase: http://localhost:8090
```

## Docker Compose Configuration

Our standard `docker-compose.yml` configuration:

```yaml
version: '3.8'
services:
  frontend:
    build: ./frontend
    ports:
      - "5173:5173"
    environment:
      - PUBLIC_POCKETBASE_URL=http://pocketbase:8090
    depends_on:
      - pocketbase

  pocketbase:
    build: ./backend
    ports:
      - "8090:8090"
    volumes:
      - pb_data:/pb/pb_data

volumes:
  pb_data:
```

## Development vs Production

<Tabs>
  <TabItem label="Development">
    ```bash
    # Start development environment
    docker compose up -d

    # View logs
    docker compose logs -f

    # Stop containers
    docker compose down
    ```
  </TabItem>
  <TabItem label="Production">
    ```bash
    # Build production images
    docker compose -f docker-compose.prod.yml build

    # Deploy with production settings
    docker compose -f docker-compose.prod.yml up -d

    # Monitor logs
    docker compose logs -f
    ```
  </TabItem>
</Tabs>

## Production Configuration

The production configuration (`docker-compose.prod.yml`) includes additional security and optimization settings:

```yaml
version: '3.8'
services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.prod
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - PUBLIC_POCKETBASE_URL=http://pocketbase:8090
    restart: unless-stopped
    depends_on:
      - pocketbase

  pocketbase:
    build:
      context: ./backend
      dockerfile: Dockerfile.prod
    ports:
      - "8090:8090"
    volumes:
      - pb_data:/pb/pb_data
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8090/api/health"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  pb_data:
```

## Environment Variables

Key environment variables for Docker deployment:

```bash
# Frontend Environment Variables
PUBLIC_POCKETBASE_URL=http://pocketbase:8090
NODE_ENV=production  # For production builds

# PocketBase Environment Variables
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=your-username
SMTP_PASSWORD=your-password
```

## Data Persistence

Docker volumes are used to persist data:

```bash
# List volumes
docker volume ls

# Backup PocketBase data
docker run --rm -v orbit_pb_data:/data -v $(pwd):/backup alpine tar czf /backup/pb_data_backup.tar.gz /data

# Restore PocketBase data
docker run --rm -v orbit_pb_data:/data -v $(pwd):/backup alpine sh -c "cd /data && tar xzf /backup/pb_data_backup.tar.gz --strip 1"
```

## Health Checks and Monitoring

Monitor your Docker containers:

```bash
# Check container status
docker compose ps

# View container metrics
docker stats

# Check container logs
docker compose logs -f [service_name]
```

## Security Best Practices

1. **Use Production Builds**
   - Always use production Docker configurations in production
   - Enable build-time optimizations
   - Minimize container size

2. **Network Security**
   - Use internal Docker networks
   - Limit exposed ports
   - Configure reverse proxy for production

3. **Resource Management**
   - Set container resource limits
   - Monitor container health
   - Implement proper logging

4. **Data Security**
   - Regular volume backups
   - Secure environment variables
   - Implement access controls

## Troubleshooting

Common issues and solutions:

1. **Container Won't Start**
   ```bash
   # Check logs
   docker compose logs [service_name]
   
   # Verify configuration
   docker compose config
   ```

2. **Permission Issues**
   ```bash
   # Fix volume permissions
   docker compose down
   docker volume rm orbit_pb_data
   docker compose up -d
   ```

3. **Network Issues**
   ```bash
   # Inspect networks
   docker network ls
   docker network inspect orbit_default
   ```

## Next Steps

- Configure [SSL/TLS](/guides/ssl-configuration/)
- Set up [Monitoring](/guides/monitoring/)
- Implement [CI/CD](/guides/ci-cd/) 